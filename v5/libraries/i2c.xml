<blocks app="Snap4Arduino 1.2.7
, http://snap4arduino.rocks" version="1"><block-definition s="write i2c data %&apos;lst&apos; to register %&apos;reg&apos; at address %&apos;address&apos;" type="command" category="arduino"><header></header><code></code><translations></translations><inputs><input type="%mult%s"></input><input type="%s"></input><input type="%s"></input></inputs><script><block s="doDeclareVariables"><list><l>byte list</l></list></block><block s="doSetVar"><l>byte list</l><block s="reportNewList"><list></list></block></block><block s="doForEach"><l>each</l><block var="lst"/><script><block s="doIfElse"><block s="reportIsA"><block var="each"/><l><option>text</option></l></block><script><block s="doAddToList"><block s="reportUnicode"><block var="each"/></block><block var="byte list"/></block></script><script><block s="doAddToList"><block var="each"/><block var="byte list"/></block></script></block></script></block><block s="doRun"><block s="reportJSFunction"><list><l>address</l><l>bytes</l><l>reg</l></list><l>var board = this.arduino.board;&#xD;if (!board.i2cEnabled) {&#xD;    board.i2cConfig();&#xD;    board.i2cEnabled = true;&#xD;}&#xD;board.i2cWrite(address, reg, bytes.asArray());</l></block><list><block var="address"/><block var="byte list"/><block var="reg"/></list></block></script></block-definition><block-definition s="send i2c command %&apos;lst&apos; to address %&apos;address&apos;" type="command" category="arduino"><header></header><code></code><translations></translations><inputs><input type="%mult%s"></input><input type="%txt"></input></inputs><script><block s="doDeclareVariables"><list><l>byte list</l></list></block><block s="doSetVar"><l>byte list</l><block s="reportNewList"><list></list></block></block><block s="doForEach"><l>each</l><block var="lst"/><script><block s="doIfElse"><block s="reportIsA"><block var="each"/><l><option>text</option></l></block><script><block s="doAddToList"><block s="reportUnicode"><block var="each"/></block><block var="byte list"/></block></script><script><block s="doAddToList"><block var="each"/><block var="byte list"/></block></script></block></script></block><block s="doRun"><block s="reportJSFunction"><list><l>address</l><l>bytes</l></list><l>var board = this.arduino.board;&#xD;if (!board.i2cEnabled) {&#xD;    board.i2cConfig();&#xD;    board.i2cEnabled = true;&#xD;}&#xD;board.i2cWrite(address, bytes.asArray());</l></block><list><block var="address"/><block var="byte list"/></list></block></script></block-definition><block-definition s="read i2c register %&apos;reg&apos; from address %&apos;address&apos;" type="reporter" category="arduino"><header></header><code></code><translations></translations><inputs><input type="%s"></input><input type="%s"></input></inputs><script><block s="doRun"><block s="reportJSFunction"><list><l>address</l><l>reg</l></list><l>var board= this.arduino.board;&#xD;board[&apos;i2cResponse-&apos; + Number(address)] = null;&#xD;if (!board.i2cEnabled) {&#xD;    board.i2cConfig();&#xD;    board.i2cEnabled = true;&#xD;}&#xD;board.i2cReadOnce(&#xD;    Number(address),&#xD;    Number(reg),&#xD;    function (response) {&#xD;        board[&apos;i2cResponse-&apos; + Number(address)] = response;&#xD;    });</l></block><list><block var="address"/><block var="reg"/></list></block><block s="doWaitUntil"><block s="evaluate"><block s="reportJSFunction"><list><l>address</l></list><l>var board = this.arduino.board;&#xD;board.checkArduinoBoardParam(&apos;i2cResponse-&apos; + Number(address));&#xD;return board[&apos;i2cResponse-&apos; + Number(address)] !== null;</l></block><list><block var="address"/></list></block></block><block s="doReport"><block s="evaluate"><block s="reportJSFunction"><list><l>address</l></list><l>var board = this.arduino.board;&#xD;board.getArduinoBoardParam(&apos;i2cResponse-&apos; + Number(address));&#xD;return new List(board[&apos;i2cResponse-&apos; + Number(address)]);</l></block><list><block var="address"/></list></block></block></script></block-definition></blocks>